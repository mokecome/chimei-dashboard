# 奇美食品客服語音分析系統 - 頁面清單

## 系統架構說明
本系統為語音客服數據分析平台，基於 Vue 3 + FastAPI 架構，支援語音轉文字、AI 分析、數據視覺化等功能，並提供完整的 RBAC 權限管理機制。

## 頁面清單

| 頁面ID | 頁面名稱 | 路由路徑 | Vue 組件 | 後端 API | 訪問角色 |
|--------|----------|----------|----------|----------|----------|
| PG-001 | 登入頁面 | `/login` | `LoginView.vue` | `/api/v1/auth/login` | 公開 |
| PG-002 | 營運洞察(儀表板) | `/dashboard` | `DashboardView.vue` | `/api/v1/dashboard/*` | Viewer+ |
| PG-003 | 數據分析 | `/analysis` | `AnalysisView.vue` | `/api/v1/analysis` | Viewer+ |
| PG-004 | 分析詳細 | `/analysis/detail/:id` | `AnalysisDetailView.vue` | `/api/v1/analysis/{id}` | Viewer+ |
| PG-005 | 資料來源管理 | `/datasource` | `DataSourceView.vue` | `/api/v1/files` | Operator+ |
| PG-006 | 檔案詳細 | `/datasource/detail/:id` | `DataSourceDetailView.vue` | `/api/v1/files/{id}` | Operator+ |
| PG-007 | 分類設定 | `/labelsetting` | `LabelSettingView.vue` | `/api/v1/labels/*` | Manager+ |
| PG-008 | 帳號管理 | `/account` | `AccountManagementView.vue` | `/api/v1/users` | Admin |

## 頁面功能詳述

### PG-001: 登入頁面
- **核心職責**: 系統身份驗證與會話管理
- **主要功能**:
  - Email/使用者名稱登入
  - 密碼驗證（bcrypt）
  - JWT Token 認證
  - 「記住我」功能
  - 登入狀態持久化
  - 自動跳轉至儀表板
- **技術實現**:
  - 前端：Vue 3 Composition API + Element Plus Form
  - 狀態管理：Pinia Auth Store
  - 路由控制：Vue Router Navigation Guards
  - Token 管理：localStorage + 自動刷新

### PG-002: 營運洞察(儀表板)
- **核心職責**: 系統數據總覽與快速導航中心
- **主要功能**:
  - **統計卡片**: 總檔案數、今日新增、處理中、失敗數量
  - **橫向柱狀圖**: 商品提及次數 Top 10（支援點擊跳轉）
  - **圓餅圖**: 情感分析分布（正面/負面/中性）
  - **垂直柱狀圖**: 反饋類型分布統計
  - **折線圖**: 每日檔案處理趨勢（7天/30天切換）
  - 數據自動刷新（30秒）
  - 圖表互動導航至分析頁面
- **技術實現**:
  - 圖表庫：ECharts 5.x
  - 響應式設計：Element Plus Grid
  - 自動更新：setInterval + Reactive Data
  - 圖表事件：ECharts Click Events

### PG-003: 數據分析
- **核心職責**: 多維度數據分析與檢索中心
- **主要功能**:
  - **分析結果列表**: 檔案名稱、商品標籤、反饋類型、情感傾向、摘要、上傳者、時間
  - **多維度篩選**:
    - 商品標籤（多選下拉）
    - 反饋類型（多選下拉）
    - 情感傾向（單選）
    - 上傳者（下拉選單）
    - 時間範圍（日期選擇器）
  - **分頁功能**: 10/20/50/100 筆選擇
  - **欄位排序**: 時間、情感傾向
  - **數據匯出**: Excel 格式（Manager+ 權限）
- **技術實現**:
  - 表格組件：Element Plus Table
  - 篩選組件：Select、DatePicker
  - 匯出功能：SheetJS (xlsx)
  - URL 同步：Vue Router Query Parameters

### PG-004: 分析詳細
- **核心職責**: 單筆分析結果的完整展示
- **主要功能**:
  - 完整分析結果展示
  - 原始文字內容顯示
  - AI 分析詳情（關鍵詞、摘要、置信度）
  - 相關檔案資訊
  - 返回列表導航
  - 跳轉檔案詳細按鈕
- **技術實現**:
  - 路由參數：Dynamic Route Matching
  - 數據載入：Async/Await API 調用
  - 內容展示：富文本格式化

### PG-005: 資料來源管理
- **核心職責**: 語音與文字檔案的資料池管理
- **主要功能**:
  - **檔案上傳**:
    - 支援格式：.wav, .mp3, .txt
    - 拖放上傳區域
    - 多檔案批次上傳
    - 上傳進度顯示
    - 檔案大小限制 100MB
  - **檔案列表管理**:
    - 檔案資訊：檔名、類型、大小、狀態、上傳時間
    - 處理狀態：pending/processing/completed/failed
    - 檔案搜尋功能
    - 單檔刪除（需權限確認）
    - 狀態圖標與進度顯示
- **技術實現**:
  - 上傳組件：Element Plus Upload
  - 檔案驗證：前端格式與大小檢查
  - 進度追蹤：Upload Progress Events
  - 狀態更新：WebSocket 或輪詢機制

### PG-006: 檔案詳細
- **核心職責**: 檔案內容與處理狀態的詳細展示
- **主要功能**:
  - 檔案基本資訊展示
  - 轉錄文字顯示（音訊檔案）
  - 原始內容顯示（文字檔案）
  - 處理狀態即時追蹤
  - 錯誤訊息詳細顯示
  - 重新處理觸發按鈕
- **技術實現**:
  - 動態路由：Dynamic Segments
  - 狀態監控：Real-time Status Updates
  - 錯誤處理：Try-Catch + User Feedback

### PG-007: 分類設定
- **核心職責**: AI 分析所需的標籤系統管理
- **主要功能**:
  - **商品標籤管理**:
    - 新增商品標籤（最多200個）
    - 標籤名稱編輯
    - 關鍵字設定（Tag 輸入）
    - 標籤刪除功能
    - 重複性檢查
  - **反饋類型管理**:
    - 新增反饋類型（最多30個）
    - 預設類型選擇：產品品質、包裝問題、配送服務等
    - 關鍵字關聯設定
    - 使用統計顯示
- **技術實現**:
  - 標籤輸入：Element Plus Tag Input
  - 表單驗證：Form Validation Rules
  - 即時保存：Auto-save on Change
  - 重複檢查：Real-time Duplication Detection

### PG-008: 帳號管理
- **核心職責**: 系統用戶與權限的集中管理
- **主要功能**:
  - **用戶帳號管理**:
    - 新增用戶（Email、密碼、姓名、角色）
    - 編輯用戶基本資訊
    - 啟用/停用帳號狀態
    - 用戶列表分頁與搜尋
    - 預設 admin 帳號保護
  - **角色權限設定**:
    - 四級角色：Admin/Manager/Operator/Viewer
    - 功能模組權限控制
    - 權限設定即時生效
- **技術實現**:
  - 用戶表格：Element Plus Table + Pagination
  - 權限矩陣：Checkbox Matrix
  - 表單驗證：Email Format + Password Strength
  - 權限同步：Real-time Permission Updates

## 用戶角色權限矩陣

| 功能/角色 | Admin | Manager | Operator | Viewer |
|----------|-------|---------|----------|---------|
| 登入系統 | ✓ | ✓ | ✓ | ✓ |
| 儀表板查看 | ✓ | ✓ | ✓ | ✓ |
| 數據分析查看 | ✓ | ✓ | ✓ | ✓ |
| 分析詳細查看 | ✓ | ✓ | ✓ | ✓ |
| 檔案上傳 | ✓ | ✓ | ✓ | ✗ |
| 檔案管理 | ✓ | ✓ | ✓ | ✗ |
| 檔案刪除 | ✓ | ✓ | ✗ | ✗ |
| 標籤設定 | ✓ | ✓ | ✗ | ✗ |
| 數據匯出 | ✓ | ✓ | ✗ | ✗ |
| 帳號管理 | ✓ | ✗ | ✗ | ✗ |

## 頁面導航流程

### 主要業務流程
1. **登入流程**: `/login` → `/dashboard`
2. **數據分析流程**: `/dashboard` → `/analysis` → `/analysis/detail/:id`
3. **檔案管理流程**: `/datasource` → `/datasource/detail/:id`
4. **標籤設定流程**: `/labelsetting` → 觸發重新分析 → `/analysis`
5. **帳號管理流程**: `/account` → 新增/編輯用戶 → 權限設定

### 跨頁面導航
- **儀表板 → 分析**: 圖表點擊自動帶入篩選條件
- **分析 → 分析詳細**: 列表項目點擊
- **分析詳細 → 檔案詳細**: 查看原始檔案
- **檔案管理 → 檔案詳細**: 檔案項目點擊
- **所有頁面**: 頂部導航選單快速切換

## 技術架構實現

### 前端路由結構
```typescript
// Vue Router 配置
const routes = [
  { path: '/login', component: LoginView, meta: { requiresAuth: false } },
  { 
    path: '/', 
    component: MainLayout,
    meta: { requiresAuth: true },
    children: [
      { path: 'dashboard', component: DashboardView, meta: { permission: 'DASHBOARD_VIEW' } },
      { path: 'analysis', component: AnalysisView, meta: { permission: 'ANALYSIS_VIEW' } },
      { path: 'analysis/detail/:id', component: AnalysisDetailView, meta: { permission: 'ANALYSIS_VIEW' } },
      { path: 'datasource', component: DataSourceView, meta: { permission: 'DATASOURCE_VIEW' } },
      { path: 'datasource/detail/:id', component: DataSourceDetailView, meta: { permission: 'DATASOURCE_VIEW' } },
      { path: 'labelsetting', component: LabelSettingView, meta: { permission: 'LABELS_VIEW' } },
      { path: 'account', component: AccountManagementView, meta: { permission: 'USERS_MANAGE' } }
    ]
  }
]
```

### 權限控制機制
- **路由級別**: Navigation Guards 檢查用戶權限
- **組件級別**: v-if 指令基於權限顯示/隱藏功能
- **API 級別**: HTTP Request 攔截器自動添加 JWT Token
- **狀態管理**: Pinia Store 統一管理用戶資訊與權限

### 響應式設計
- **最小寬度**: 1024px（桌面優先）
- **佈局系統**: Element Plus 24 欄格線系統
- **表格響應**: 自動省略過長內容，支援橫向滾動
- **圖表適配**: ECharts 自動 resize 機制

## API 整合對應

### 主要 API 端點對應
| 頁面 | 主要 API 端點 | HTTP 方法 | 功能 |
|------|---------------|-----------|------|
| 登入 | `/api/v1/auth/login` | POST | 用戶登入驗證 |
| 儀表板 | `/api/v1/dashboard/stats` | GET | 獲取統計數據 |
| 儀表板 | `/api/v1/dashboard/charts` | GET | 獲取圖表數據 |
| 分析 | `/api/v1/analysis` | GET | 獲取分析列表 |
| 分析 | `/api/v1/analysis/export` | GET | 匯出分析數據 |
| 檔案 | `/api/v1/files` | GET/POST/DELETE | 檔案 CRUD 操作 |
| 標籤 | `/api/v1/labels/products` | GET/POST/PUT/DELETE | 商品標籤管理 |
| 標籤 | `/api/v1/labels/feedback` | GET/POST/PUT/DELETE | 反饋標籤管理 |
| 帳號 | `/api/v1/users` | GET/POST/PUT/DELETE | 用戶管理 |

### 數據流向
1. **前端請求** → Axios HTTP Client → JWT Token 自動添加
2. **後端驗證** → JWT 解析 → 權限檢查 → 業務邏輯處理
3. **數據回應** → 統一 Response 格式 → 前端 Store 更新 → UI 重新渲染

此頁面清單完整對應了實際系統實現，確保文檔與代碼的一致性，為後續開發和維護提供準確的參考依據。